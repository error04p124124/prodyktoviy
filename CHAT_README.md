# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£ –ò –ü–†–û–í–ï–†–ö–ï –ß–ê–¢–ê

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8
–î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ `# -*- coding: utf-8 -*-` –≤–æ –≤—Å–µ Python —Ñ–∞–π–ª—ã:
- ‚úÖ chat/models.py
- ‚úÖ chat/views.py
- ‚úÖ chat/consumers.py
- ‚úÖ chat/admin.py
- ‚úÖ chat/apps.py
- ‚úÖ chat/routing.py
- ‚úÖ chat/urls.py
- ‚úÖ grocery_store/asgi.py
- ‚úÖ accounts/models.py
- ‚úÖ products/models.py

### 2. –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ —á–∞—Ç–∞
–£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤–∏–¥–∂–µ—Ç–∞ —á–∞—Ç–∞ –∏–∑ base.html. –¢–µ–ø–µ—Ä—å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —á–∏—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.

### 3. –í–∏–¥–∂–µ—Ç —á–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ö–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞
- WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º

## üöÄ –ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –±–∞–∑–∞)
```cmd
start_server.bat
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å –Ω–æ–≤–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```cmd
full_reset_and_start.bat
```
–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –£–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
2. –°–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
3. –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
4. –°–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: admin)
5. –°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
6. –ó–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫ Django
```cmd
python manage.py runserver
```

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ê–¢–ê

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
```cmd
check_chat.bat
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Django Channels
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Daphne
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–æ–¥–µ–ª—å Message
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ WebSocket –º–∞—Ä—à—Ä—É—Ç—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ ASGI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏:
```cmd
python check_encoding.py
```

## üîç –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´ –ß–ê–¢–ê –í –ë–†–ê–£–ó–ï–†–ï

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://127.0.0.1:8000/
2. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: admin)
3. –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞
4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç —á–∞—Ç–∞
5. –ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
6. –û—Ç–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥—É—é –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ —Å —Ç–µ–º –∂–µ —Å–∞–π—Ç–æ–º
7. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
8. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç - –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
9. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –ø–µ—Ä–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üêõ –û–¢–õ–ê–î–ö–ê

### –ï—Å–ª–∏ —á–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)**
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ JavaScript
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ WebSocket

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞**
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞
   - –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
   - –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Network ‚Üí WS)
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ws://127.0.0.1:8000/ws/chat/
   - –°—Ç–∞—Ç—É—Å: 101 Switching Protocols

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤–º–µ—Å—Ç–æ —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ Python —Ñ–∞–π–ª—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `# -*- coding: utf-8 -*-`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python check_encoding.py`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å: –∑–∞–ø—É—Å—Ç–∏—Ç–µ `chcp 65001` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–∞

## üìù –ù–ê–°–¢–†–û–ô–ö–ò

### settings.py
- `LANGUAGE_CODE = 'ru-ru'` - —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
- `USE_I18N = True` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- `ASGI_APPLICATION` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è WebSocket
- `CHANNEL_LAYERS` - in-memory —Å–ª–æ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### base.html
- `<meta charset="UTF-8">` - –∫–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8
- `<html lang="ru">` - —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫

## üìÇ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í –ß–ê–¢–ê

```
chat/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ admin.py           # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ Message –≤ –∞–¥–º–∏–Ω–∫–µ
‚îú‚îÄ‚îÄ apps.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ consumers.py       # WebSocket consumer –¥–ª—è —á–∞—Ç–∞
‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª—å Message
‚îú‚îÄ‚îÄ routing.py         # WebSocket –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ urls.py            # HTTP –º–∞—Ä—à—Ä—É—Ç—ã (history)
‚îî‚îÄ‚îÄ views.py           # View –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏

templates/
‚îî‚îÄ‚îÄ base.html          # –í–∏–¥–∂–µ—Ç —á–∞—Ç–∞ (–∫–Ω–æ–ø–∫–∞ + –æ–∫–Ω–æ + JavaScript)

grocery_store/
‚îú‚îÄ‚îÄ asgi.py            # ASGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å WebSocket
‚îî‚îÄ‚îÄ settings.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django Channels
```

## üéØ –õ–û–ì–ò–ù–´ –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `full_reset_and_start.bat`:

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: admin / admin (—Ä–æ–ª—å: director)
- **–ú–µ–Ω–µ–¥–∂–µ—Ä**: manager / manager (—Ä–æ–ª—å: manager)
- **–ö–∞—Å—Å–∏—Ä**: cashier / cashier (—Ä–æ–ª—å: cashier)

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∞—Ç!

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `python manage.py runserver --noreload` - —ç—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç WebSocket
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Ç–æ–ª—å–∫–æ `python manage.py runserver` –∏–ª–∏ `start_server.bat`
3. **WebSocket** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
4. **In-memory channel layer** –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞
